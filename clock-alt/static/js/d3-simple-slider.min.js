!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-array"),require("d3-axis"),require("d3-dispatch"),require("d3-drag"),require("d3-ease"),require("d3-scale"),require("d3-selection"),require("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-axis","d3-dispatch","d3-drag","d3-ease","d3-scale","d3-selection","d3-transition"],e):e((t=t||self).d3=t.d3||{},t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3)}(this,function(t,Q,e,R,_,H,P,C){"use strict";var E=200,G=8,I=1,J=2,K=3,N=4;function S(t){return"translate("+t+",0)"}function U(t){return"translate(0,"+t+")"}function r(a,l){l=void 0!==l?l:null;var i=[0],r=[0],s=[0,10],c=100,u=100,o=!0,d="M-5.5,-5.5v10l6,5.5l6,-5.5v-10z",f=null,m=null,g=null,p=null,h=null,v=null,k=null,x=R.dispatch("onchange","start","end","drag"),y=null,A=null,b=null,w=a===I||a===N?-1:1,q=a===N||a===J?"y":"x",M=a===N||a===J?"x":"y",z=a===I||a===K?S:U,F=a===I||a===K?U:S,L=null;switch(a){case I:L=e.axisTop;break;case J:L=e.axisRight;break;case K:L=e.axisBottom;break;case N:L=e.axisLeft}var V=null,D=null;function n(t){y=t.selection?t.selection():t,l=l?l.range([Q.min(l.range()),Q.min(l.range())+(a===I||a===K?c:u)]):(l=s[0]instanceof Date?P.scaleTime():P.scaleLinear()).domain(s).range([0,a===I||a===K?c:u]).clamp(!0),A=P.scaleLinear().range(l.range()).domain(l.range()).clamp(!0),i=i.map(function(t){return P.scaleLinear().range(s).domain(s).clamp(!0)(t)}),p=p||l.tickFormat(),v=v||p||l.tickFormat(),y.selectAll(".axis").data([null]).enter().append("g").attr("transform",F(7*w)).attr("class","axis");var n=y.selectAll(".slider").data([null]),e=n.enter().append("g").attr("class","slider").attr("cursor",a===I||a===K?"ew-resize":"ns-resize").call(_.drag().on("start",function(){C.select(this).classed("active",!0);var r=A(a===K||a===I?C.event.x:C.event.y);b=Q.scan(i.map(function(t){return Math.abs(t-T(l.invert(r)))}));var t=i.map(function(t,e){return e===b?T(l.invert(r)):t});B(t),x.call("start",n,1===t.length?t[0]:t),j(t,!0)}).on("drag",function(){var t=A(a===K||a===I?C.event.x:C.event.y),r=T(l.invert(t)),e=i.map(function(t,e){return 2===i.length?e===b?0===b?Math.min(r,T(i[1])):Math.max(r,T(i[0])):t:e===b?r:t});B(e),x.call("drag",n,1===e.length?e[0]:e),j(e,!0)}).on("end",function(){C.select(this).classed("active",!1);var r=A(a===K||a===I?C.event.x:C.event.y),t=i.map(function(t,e){return e===b?T(l.invert(r)):t});B(t),x.call("end",n,1===t.length?t[0]:t),j(t,!0),b=null}));e.append("line").attr("class","track").attr(q+"1",l.range()[0]-G).attr("stroke","#bbb").attr("stroke-width",6).attr("stroke-linecap","round"),e.append("line").attr("class","track-inset").attr(q+"1",l.range()[0]-G).attr("stroke","#eee").attr("stroke-width",4).attr("stroke-linecap","round"),k&&e.append("line").attr("class","track-fill").attr(q+"1",1===i.length?l.range()[0]-G:l(i[0])).attr("stroke",k).attr("stroke-width",4).attr("stroke-linecap","round"),e.append("line").attr("class","track-overlay").attr(q+"1",l.range()[0]-G).attr("stroke","transparent").attr("stroke-width",40).attr("stroke-linecap","round").merge(n.select(".track-overlay"));var r=e.selectAll(".parameter-value").data(i).enter().append("g").attr("class","parameter-value").attr("transform",function(t){return z(l(t))}).attr("font-family","sans-serif").attr("text-anchor",a===J?"start":a===N?"end":"middle");r.append("path").attr("transform","rotate("+90*(a+1)+")").attr("d",d).attr("fill","white").attr("stroke","#777"),o&&1===i.length&&r.append("text").attr("font-size",10).attr(M,27*w).attr("dy",a===I?"0em":a===K?".71em":".32em").text(p(i[0])),t.select(".track").attr(q+"2",l.range()[1]+G),t.select(".track-inset").attr(q+"2",l.range()[1]+G),k&&t.select(".track-fill").attr(q+"2",1===i.length?l(i[0]):l(i[1])),t.select(".track-overlay").attr(q+"2",l.range()[1]+G),t.select(".axis").call(L(l).tickFormat(p).ticks(h).tickValues(m)),y.select(".axis").select(".domain").remove(),t.select(".axis").attr("transform",F(7*w)),t.selectAll(".axis text").attr("fill","#aaa").attr(M,20*w).attr("dy",a===I?"0em":a===K?".71em":".32em").attr("text-anchor",a===J?"start":a===N?"end":"middle"),t.selectAll(".axis line").attr("stroke","#aaa"),t.selectAll(".parameter-value").attr("transform",function(t){return z(l(t))}),O(),D=y.select(".parameter-value text"),V=y.select(".track-fill")}function O(){if(o&&1===i.length){var e=[];y.selectAll(".axis .tick").each(function(t){e.push(Math.abs(t-i[0]))});var r=Q.scan(e);y.selectAll(".axis .tick text").attr("opacity",function(t,e){return e===r?0:1})}}function T(e){if(f){var t=(e-s[0])%f,r=e-t;return f<2*t&&(r+=f),e instanceof Date?new Date(r):r}if(g){var n=Q.scan(g.map(function(t){return Math.abs(e-t)}));return g[n]}return e}function j(t,e){i!==t&&(i=t,e&&x.call("onchange",n,1===t.length?t[0]:t),O())}function B(t,e){(e=void 0!==e&&e)?(y.selectAll(".parameter-value").data(t).transition().ease(H.easeQuadOut).duration(E).attr("transform",function(t){return z(l(t))}),k&&V.transition().ease(H.easeQuadOut).duration(E).attr(q+"1",1===i.length?l.range()[0]-G:l(t[0])).attr(q+"2",1===i.length?l(t[0]):l(t[1]))):(y.selectAll(".parameter-value").data(t).attr("transform",function(t){return z(l(t))}),k&&V.attr(q+"1",1===i.length?l.range()[0]-G:l(t[0])).attr(q+"2",1===i.length?l(t[0]):l(t[1]))),o&&D.text(v(t[0]))}return l&&(s=[Q.min(l.domain()),Q.max(l.domain())],a===I||a===K?c=Q.max(l.range())-Q.min(l.range()):u=Q.max(l.range())-Q.min(l.range()),l=l.clamp(!0)),n.min=function(t){return arguments.length?(s[0]=t,n):s[0]},n.max=function(t){return arguments.length?(s[1]=t,n):s[1]},n.domain=function(t){return arguments.length?(s=t,n):s},n.width=function(t){return arguments.length?(c=t,n):c},n.height=function(t){return arguments.length?(u=t,n):u},n.tickFormat=function(t){return arguments.length?(p=t,n):p},n.displayFormat=function(t){return arguments.length?(v=t,n):v},n.ticks=function(t){return arguments.length?(h=t,n):h},n.value=function(t){if(!arguments.length)return 1===i.length?i[0]:i;var e=(Array.isArray(t)?t:[t]).map(l).map(A).map(l.invert).map(T);return B(e,!0),j(e,!0),n},n.silentValue=function(t){if(!arguments.length)return 1===i.length?i[0]:i;var e=(Array.isArray(t)?t:[t]).map(l).map(A).map(l.invert).map(T);return B(e,!1),j(e,!1),n},n.default=function(t){if(!arguments.length)return 1===r.length?r[0]:r;var e=Array.isArray(t)?t:[t];return i=r=e,n},n.step=function(t){return arguments.length?(f=t,n):f},n.tickValues=function(t){return arguments.length?(m=t,n):m},n.marks=function(t){return arguments.length?(g=t,n):g},n.handle=function(t){return arguments.length?(d=t,n):d},n.displayValue=function(t){return arguments.length?(o=t,n):o},n.fill=function(t){return arguments.length?(k=t,n):k},n.on=function(){var t=x.on.apply(x,arguments);return t===x?n:t},n}t.sliderHorizontal=function(t){return r(K,t)},t.sliderVertical=function(t){return r(N,t)},t.sliderTop=function(t){return r(I,t)},t.sliderRight=function(t){return r(J,t)},t.sliderBottom=function(t){return r(K,t)},t.sliderLeft=function(t){return r(N,t)},Object.defineProperty(t,"__esModule",{value:!0})});